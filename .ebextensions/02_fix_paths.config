container_commands:
  01_copy_to_current:
    command: |
      # デプロイ完了後に正しいパスにファイルをコピー
      mkdir -p /var/app/current/frontend/build
      cp -R /var/app/ondeck/frontend/build/* /var/app/current/frontend/build/ || true
    ignoreErrors: true
    
  02_create_log_file:
    command: |
      # ログファイルを作成してデバッグ情報を記録
      echo "Deployment completed at $(date)" > /var/log/frontend-deployment.log
      echo "Files in /var/app/current/frontend/build:" >> /var/log/frontend-deployment.log
      ls -la /var/app/current/frontend/build/ >> /var/log/frontend-deployment.log 2>&1 || echo "Directory not found" >> /var/log/frontend-deployment.log
    ignoreErrors: true