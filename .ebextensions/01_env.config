option_settings:
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    PORT: 8080
    DB_PROVIDER: postgres
    PG_MAX_POOL_SIZE: 10
    TOKEN_SECRET: '#{SecureRandom.hex(32)}'
    ALLOWED_ORIGINS: 'https://${AWS::Region}.elasticbeanstalk.com,https://${APPLICATION_URL}'
    STATIC_FILES_PATH: '/var/app/current/backend/public'

  # Set Node.js version
  aws:elasticbeanstalk:nodejs:
    NodeVersion: 18.x
    ProxyServer: nginx

  # Configure proxy server
  aws:elasticbeanstalk:environment:proxy:
    ProxyServer: nginx

Parameters:
  APPLICATION_URL:
    Type: String
    Description: The URL of your application (without https://)
    Default: example.com